2017-07-09 21:12:22  --------------------------------------------------------------------------------
2017-07-09 21:12:22  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  __schema {
    queryType {
      name
    }
  }
}

2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  __schema {
    queryType {
      name
    }
  }
}

2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca1") {
    role
    username
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    role
    username
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca2") {
    role
    username
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    id
    username
    bio
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  users {
    username
    createdAt
  }
}

2017-07-09 21:12:33  users readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  users(limit: 1) {
    username
    createdAt
  }
}

2017-07-09 21:12:33  users readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  users(lastCreatedAt: 1479776904993) {
    username
    createdAt
  }
}

2017-07-09 21:12:33  users readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  users(lastCreatedAt: 1479776904993, limit: 1) {
    username
    createdAt
  }
}

2017-07-09 21:12:33  users readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    followers {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  followers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    followers(limit: 1) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  followers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    followers(lastCreatedAt: 1479776905993) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  followers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    followers(lastCreatedAt: 1479776905993, limit: 1) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  followers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    following {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  following readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    following(limit: 1) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  following readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    following(lastCreatedAt: 1479776905993) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  following readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    following(lastCreatedAt: 1479776905993, limit: 1) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  following readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    tweets {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    tweets(limit: 1) {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    tweets(lastCreatedAt: 1479964340853) {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    tweets(lastCreatedAt: 1479964340853, limit: 1) {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    liked {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  liked readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    liked(limit: 1) {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  liked readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    liked(lastCreatedAt: 1479964371334) {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  liked readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca0") {
    liked(lastCreatedAt: 1479964371334, limit: 1) {
      id
      createdAt
    }
  }
}

2017-07-09 21:12:33  user readOne with user stubailo is authorized
2017-07-09 21:12:33  liked readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e351") {
    author {
      username
    }
  }
}

2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e351") {
    id
    body
  }
}

2017-07-09 21:12:33  tweet readOne with user stubailo is authorized
2017-07-09 21:12:33  tweet readOne with user stubailo is authorized
2017-07-09 21:12:33  author readOne with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweets {
    id
    createdAt
  }
}

2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweets(limit: 1) {
    id
    createdAt
  }
}

2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweets(lastCreatedAt: 1479964340853) {
    id
    createdAt
  }
}

2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweets(lastCreatedAt: 1479964340853, limit: 1) {
    id
    createdAt
  }
}

2017-07-09 21:12:33  tweets readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e353") {
    likers {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  tweet readOne with user stubailo is authorized
2017-07-09 21:12:33  likers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e353") {
    likers(limit: 1) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  tweet readOne with user stubailo is authorized
2017-07-09 21:12:33  likers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e353") {
    likers(lastCreatedAt: 1479776904993) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  tweet readOne with user stubailo is authorized
2017-07-09 21:12:33  likers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e353") {
    likers(lastCreatedAt: 1479776904993, limit: 1) {
      username
      createdAt
    }
  }
}

2017-07-09 21:12:33  tweet readOne with user stubailo is authorized
2017-07-09 21:12:33  likers readMany with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createUser(input: {username: "tobkle", bio: "someone", role: "admin"}) {
    id
    role
  }
}

2017-07-09 21:12:33  insert user create with user stubailo is authorized
2017-07-09 21:12:33  inserted user 596280212157d09ddf9d7294.
2017-07-09 21:12:33  pubsub userInserted readOne with user stubailo is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createUser(input: {username: "zol", bio: "Maker of apps, product and engineering. Climber. Cyclist. Enthusiast. Product lead", role: "editor"}) {
    id
  }
}

2017-07-09 21:12:33  insert user create with user tobkle is authorized
2017-07-09 21:12:33  inserted user 596280212157d09ddf9d7295.
2017-07-09 21:12:33  pubsub userInserted readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280212157d09ddf9d7295") {
    username
    bio
    role
  }
}

2017-07-09 21:12:33  user readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280212157d09ddf9d7294") {
    username
    role
  }
}

2017-07-09 21:12:33  user readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280212157d09ddf9d7295", input: {username: "zoltan", bio: "Maker of things, I guess", role: "editor"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:33  update user update with user tobkle is authorized
2017-07-09 21:12:33  updated user 596280212157d09ddf9d7295.
2017-07-09 21:12:33  pubsub userUpdated readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280212157d09ddf9d7294", input: {username: "tobkle", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:33  update user update with user tobkle is authorized
2017-07-09 21:12:33  updated user 596280212157d09ddf9d7294.
2017-07-09 21:12:33  pubsub userUpdated readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280212157d09ddf9d7295", input: {username: "zoltan", bio: "now an admin", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:33  update user update with user tobkle is authorized
2017-07-09 21:12:33  updated user 596280212157d09ddf9d7295.
2017-07-09 21:12:33  pubsub userUpdated readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280212157d09ddf9d7294", input: {username: "tobkle", bio: "Maker of things, I guess", role: "editor"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:33  update user update with user tobkle is authorized
2017-07-09 21:12:33  updated user 596280212157d09ddf9d7294.
2017-07-09 21:12:33  pubsub userUpdated readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "editor", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280212157d09ddf9d7294", input: {username: "tobkle", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:33  authQuery: {
  "$or": [
    {
      "_id": "596280212157d09ddf9d7294"
    }
  ]
}
2017-07-09 21:12:33  ERROR Not authorized to update field "role"
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "zoltan", role: "admin", id: "596280212157d09ddf9d7295",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280212157d09ddf9d7294", input: {username: "tobkle", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:33  update user update with user zoltan is authorized
2017-07-09 21:12:33  updated user 596280212157d09ddf9d7294.
2017-07-09 21:12:33  pubsub userUpdated readOne with user zoltan is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeUser(id: "596280212157d09ddf9d7295")
}

2017-07-09 21:12:33  removeUser delete with user tobkle is authorized
2017-07-09 21:12:33  removed user 596280212157d09ddf9d7295.
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "596280212157d09ddf9d7294", coauthorsIds: [], body: "This is a test tweet of user tobkle"}) {
    id
  }
}

2017-07-09 21:12:33  insert tweet create with user tobkle is authorized
2017-07-09 21:12:33  inserted tweet 596280212157d09ddf9d7296.
2017-07-09 21:12:33  pubsub tweetInserted readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "583291a1638566b3c5a92ca1", coauthorsIds: [], body: "We put our hearts into this talk about a #GraphQL-first workflow and how it helped us build apps fast:"}) {
    id
  }
}

2017-07-09 21:12:33  insert tweet create with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280212157d09ddf9d7296") {
    author {
      id
    }
    body
  }
}

2017-07-09 21:12:33  tweet readOne with user tobkle is authorized
2017-07-09 21:12:33  inserted tweet 596280212157d09ddf9d7297.
2017-07-09 21:12:33  pubsub tweetInserted readOne with user tobkle is authorized
2017-07-09 21:12:33  author readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e352") {
    author {
      id
    }
    body
  }
}

2017-07-09 21:12:33  tweet readOne with user tobkle is authorized
2017-07-09 21:12:33  author readOne with user tobkle is authorized
2017-07-09 21:12:33  --------------------------------------------------------------------------------
2017-07-09 21:12:33  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "596280212157d09ddf9d7296", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:33  tweet getOneById in updateById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:33  update tweet update with user tobkle is authorized
2017-07-09 21:12:33  updated tweet 596280212157d09ddf9d7296.
2017-07-09 21:12:33  pubsub tweetUpdated readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "596280212157d09ddf9d7297", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:34  tweet getOneById in updateById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:34  update tweet update with user tobkle is authorized
2017-07-09 21:12:34  updated tweet 596280212157d09ddf9d7297.
2017-07-09 21:12:34  pubsub tweetUpdated readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280212157d09ddf9d7296") {
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeTweet(id: "596280212157d09ddf9d7296")
}

2017-07-09 21:12:34  removeTweet delete with user tobkle is authorized
2017-07-09 21:12:34  tweet getOneById in removeById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:34  removed tweet 596280212157d09ddf9d7296.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeTweet(id: "596280212157d09ddf9d7297")
}

2017-07-09 21:12:34  removeTweet delete with user tobkle is authorized
2017-07-09 21:12:34  tweet getOneById in removeById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:34  removed tweet 596280212157d09ddf9d7297.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280212157d09ddf9d7296") {
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "admin", id: "596280212157d09ddf9d7294",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeUser(id: "596280212157d09ddf9d7294")
}

2017-07-09 21:12:34  removeUser delete with user tobkle is authorized
2017-07-09 21:12:34  removed user 596280212157d09ddf9d7294.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280212157d09ddf9d7294") {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to readOne in user.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createUser(input: {username: "zol", bio: "Maker of apps, product and engineering. Climber. Cyclist. Enthusiast. Product lead", role: "user"}) {
    id
  }
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to create in insert user.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca1") {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to readOne in user.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "583291a1638566b3c5a92ca1", input: {username: "zoltan", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to update in update user.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeUser(id: "583291a1638566b3c5a92ca1")
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to delete in removeUser.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "", coauthorsIds: [], body: "This is a test tweet of user tobkle"}) {
    id
  }
}

2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "583291a1638566b3c5a92ca1", coauthorsIds: [], body: "We put our hearts into this talk about a #GraphQL-first workflow and how it helped us build apps fast:"}) {
    id
  }
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to create in insert tweet.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e352") {
    author {
      id
    }
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user <no-user> is authorized
2017-07-09 21:12:34  ERROR Authorization: Not authorized to readOne in author.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "583676d3618530145474e352", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:34  tweet getOneById in updateById for docBefore readOne with user <no-user> is authorized
2017-07-09 21:12:34  ERROR Authorization: Not authorized to update in update tweet.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "583676d3618530145474e352", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:34  tweet getOneById in updateById for docBefore readOne with user <no-user> is authorized
2017-07-09 21:12:34  ERROR Authorization: Not authorized to update in update tweet.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeTweet(id: "583676d3618530145474e352")
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to delete in removeTweet.
2017-07-09 21:12:34  tweet getOneById in removeById for docBefore readOne with user <no-user> is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createUser(input: {username: "tobkle", bio: "someone", role: "user"}) {
    id
    role
  }
}

2017-07-09 21:12:34  insert user create with user stubailo is authorized
2017-07-09 21:12:34  inserted user 596280222157d09ddf9d7298.
2017-07-09 21:12:34  pubsub userInserted readOne with user stubailo is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createUser(input: {username: "zol", bio: "Maker of apps, product and engineering. Climber. Cyclist. Enthusiast. Product lead", role: "user"}) {
    id
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": []
}
2017-07-09 21:12:34  ERROR Authorization: Not authorized to create in insert user.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca1") {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280222157d09ddf9d7298") {
    username
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280222157d09ddf9d7298") {
    username
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "583291a1638566b3c5a92ca1", input: {username: "zoltan", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR Not authorized to update field "role"
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280222157d09ddf9d7298", input: {username: "tobkle", bio: "Maker of things, I guess"}) {
    username
    bio
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  updated user 596280222157d09ddf9d7298.
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280222157d09ddf9d7298", input: {username: "tobkle", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR Not authorized to update field "role"
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeUser(id: "583291a1638566b3c5a92ca1")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR remove user failed for finalQuery: {
  "_id": "583291a1638566b3c5a92ca1",
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR remove user not possible for 583291a1638566b3c5a92ca1.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "596280222157d09ddf9d7298", coauthorsIds: [], body: "This is a test tweet of user tobkle"}) {
    id
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  inserted tweet 596280222157d09ddf9d7299.
2017-07-09 21:12:34  pubsub tweetInserted readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "583291a1638566b3c5a92ca1", coauthorsIds: [], body: "We put our hearts into this talk about a #GraphQL-first workflow and how it helped us build apps fast:"}) {
    id
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR Not authorized to insert tweet
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280222157d09ddf9d7299") {
    author {
      id
    }
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tobkle is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e352") {
    author {
      id
    }
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tobkle is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "596280222157d09ddf9d7299", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:34  tweet getOneById in updateById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    },
    {
      "coauthorsIds": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  updated tweet 596280222157d09ddf9d7299.
2017-07-09 21:12:34  pubsub tweetUpdated readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "583676d3618530145474e352", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:34  tweet getOneById in updateById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    },
    {
      "coauthorsIds": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR update tweet failed finalQuery: {
  "_id": "583676d3618530145474e352",
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    },
    {
      "coauthorsIds": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR update tweet failed for docToUpdate: {
  "$set": {
    "body": "This is a modified test tweet",
    "updatedAt": 1499627554277,
    "updatedById": "596280222157d09ddf9d7298"
  }
}
2017-07-09 21:12:34  ERROR update tweet not possible for 583676d3618530145474e352.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280222157d09ddf9d7299") {
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeTweet(id: "596280222157d09ddf9d7299")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  tweet getOneById in removeById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:34  removed tweet 596280222157d09ddf9d7299.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeTweet(id: "583676d3618530145474e352")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  tweet getOneById in removeById for docBefore readOne with user tobkle is authorized
2017-07-09 21:12:34  ERROR remove tweet failed for finalQuery: {
  "_id": "583676d3618530145474e352",
  "$or": [
    {
      "authorId": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  ERROR remove tweet not possible for 583676d3618530145474e352.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280222157d09ddf9d7299") {
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tobkle is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "user", id: "596280222157d09ddf9d7298",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeUser(id: "596280222157d09ddf9d7298")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d7298"
    }
  ]
}
2017-07-09 21:12:34  removed user 596280222157d09ddf9d7298.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280222157d09ddf9d7298") {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to readOne in user.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "stubailo", role: "admin", id: "583291a1638566b3c5a92ca1",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createUser(input: {username: "tobkle", bio: "someone", role: "editor"}) {
    id
    role
  }
}

2017-07-09 21:12:34  insert user create with user stubailo is authorized
2017-07-09 21:12:34  inserted user 596280222157d09ddf9d729a.
2017-07-09 21:12:34  pubsub userInserted readOne with user stubailo is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createUser(input: {username: "zol", bio: "Maker of apps, product and engineering. Climber. Cyclist. Enthusiast. Product lead", role: "editor"}) {
    id
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": []
}
2017-07-09 21:12:34  ERROR Authorization: Not authorized to create in insert user.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "583291a1638566b3c5a92ca1") {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280222157d09ddf9d729a") {
    username
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "583291a1638566b3c5a92ca1", input: {username: "zoltan", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR Not authorized to update field "role"
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tobkle", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280222157d09ddf9d729a", input: {username: "tmeasday", bio: "Maker of things, I guess"}) {
    username
    bio
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  updated user 596280222157d09ddf9d729a.
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateUser(id: "596280222157d09ddf9d729a", input: {username: "tmeasday", bio: "Maker of things, I guess", role: "admin"}) {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR Not authorized to update field "role"
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeUser(id: "583291a1638566b3c5a92ca1")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR remove user failed for finalQuery: {
  "_id": "583291a1638566b3c5a92ca1",
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR remove user not possible for 583291a1638566b3c5a92ca1.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "596280222157d09ddf9d729a", coauthorsIds: [], body: "This is a test tweet of user tobkle"}) {
    id
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  inserted tweet 596280222157d09ddf9d729b.
2017-07-09 21:12:34  pubsub tweetInserted readOne with user tmeasday is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  createTweet(input: {authorId: "583291a1638566b3c5a92ca1", coauthorsIds: [], body: "We put our hearts into this talk about a #GraphQL-first workflow and how it helped us build apps fast:"}) {
    id
  }
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR Not authorized to insert tweet
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280222157d09ddf9d729b") {
    author {
      id
    }
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tmeasday is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "583676d3618530145474e352") {
    author {
      id
    }
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tmeasday is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "596280222157d09ddf9d729b", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:34  tweet getOneById in updateById for docBefore readOne with user tmeasday is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    },
    {
      "coauthorsIds": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  updated tweet 596280222157d09ddf9d729b.
2017-07-09 21:12:34  pubsub tweetUpdated readOne with user tmeasday is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  updateTweet(id: "583676d3618530145474e352", input: {body: "This is a modified test tweet"}) {
    body
  }
}

2017-07-09 21:12:34  tweet getOneById in updateById for docBefore readOne with user tmeasday is authorized
2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    },
    {
      "coauthorsIds": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR update tweet failed finalQuery: {
  "_id": "583676d3618530145474e352",
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    },
    {
      "coauthorsIds": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR update tweet failed for docToUpdate: {
  "$set": {
    "body": "This is a modified test tweet",
    "updatedAt": 1499627554467,
    "updatedById": "596280222157d09ddf9d729a"
  }
}
2017-07-09 21:12:34  ERROR update tweet not possible for 583676d3618530145474e352.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280222157d09ddf9d729b") {
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tmeasday is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeTweet(id: "596280222157d09ddf9d729b")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  tweet getOneById in removeById for docBefore readOne with user tmeasday is authorized
2017-07-09 21:12:34  removed tweet 596280222157d09ddf9d729b.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeTweet(id: "583676d3618530145474e352")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  tweet getOneById in removeById for docBefore readOne with user tmeasday is authorized
2017-07-09 21:12:34  ERROR remove tweet failed for finalQuery: {
  "_id": "583676d3618530145474e352",
  "$or": [
    {
      "authorId": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  ERROR remove tweet not possible for 583676d3618530145474e352.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  tweet(id: "596280222157d09ddf9d729b") {
    body
  }
}

2017-07-09 21:12:34  tweet readOne with user tmeasday is authorized
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "tmeasday", role: "editor", id: "596280222157d09ddf9d729a",
Operation: "<no-name>", variables: "<no-variables>",
Query:
mutation {
  removeUser(id: "596280222157d09ddf9d729a")
}

2017-07-09 21:12:34  authQuery: {
  "$or": [
    {
      "_id": "596280222157d09ddf9d729a"
    }
  ]
}
2017-07-09 21:12:34  removed user 596280222157d09ddf9d729a.
2017-07-09 21:12:34  --------------------------------------------------------------------------------
2017-07-09 21:12:34  Request:
User: "<no-user>", role: "<no-role>", id: "<no-id>",
Operation: "<no-name>", variables: "<no-variables>",
Query:
{
  user(id: "596280222157d09ddf9d729a") {
    username
    bio
    role
  }
}

2017-07-09 21:12:34  ERROR Authorization: Not authorized to readOne in user.
